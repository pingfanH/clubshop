(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["store"],{"73f5":function(e,r,t){"use strict";t.d(r,"c",(function(){return n})),t.d(r,"f",(function(){return s})),t.d(r,"a",(function(){return i})),t.d(r,"b",(function(){return l})),t.d(r,"e",(function(){return u})),t.d(r,"d",(function(){return c}));var a=t("f6ae"),o=t("b775");function n(e){return Object(o["b"])({url:a["a"].store.list,method:"get",params:e})}function s(e){return Object(o["b"])({url:a["a"].store.recycle,method:"get",params:e})}function i(e){return Object(o["b"])({url:a["a"].store.add,method:"post",data:e})}function l(e){return Object(o["b"])({url:a["a"].store.edit,method:"post",data:e})}function u(e){return Object(o["b"])({url:a["a"].store.recovery,method:"post",data:e})}function c(e){return Object(o["b"])({url:a["a"].store.move,method:"post",data:e})}},bb50:function(e,r,t){"use strict";t.r(r);var a=function(){var e=this,r=e._self._c;return r("a-card",{attrs:{bordered:!1}},[r("content-header",{attrs:{title:"商城列表"}}),r("div",{staticClass:"table-operator"},[r("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(r){return e.$refs.createModal.show()}}},[e._v("新增")])],1),r("s-table",{ref:"table",attrs:{size:"default",rowKey:"store_id",columns:e.columns,data:e.loadData,showPagination:"auto",pageSize:15},scopedSlots:e._u([{key:"user_name",fn:function(t){return[r("span",[e._v(e._s(t.superUser.user_name))])]}},{key:"remark",fn:function(t){return[r("a-tooltip",[t?r("template",{slot:"title"},[e._v(e._s(t||"--"))]):e._e(),r("p",{staticClass:"twoline-hide",staticStyle:{width:"150px"}},[e._v(e._s(t||"--"))])],2)]}},{key:"action",fn:function(t,a){return r("span",{staticClass:"actions"},[r("a",{on:{click:function(r){return e.handleInto(a)}}},[e._v("进入商城")]),r("a-dropdown",[r("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[r("a-menu-item",[r("a",{on:{click:function(r){return e.handleAccount(a)}}},[e._v("修改账户")])]),r("a-menu-item",[r("a",{on:{click:function(r){return e.handleDelete(a)}}},[e._v("删除")])])],1),r("a",[r("span",[e._v("更多")]),r("a-icon",{attrs:{type:"down"}})],1)],1)],1)}}])}),r("create-form",{ref:"createModal",on:{handleSubmit:e.handleRefresh}}),r("AccountForm",{ref:"AccountForm",on:{handleSubmit:e.handleRefresh}})],1)},o=[],n=t("73f5"),s=t("2af9"),i=function(){var e=this,r=e._self._c;return r("a-modal",{attrs:{title:"新增商城",width:720,visible:e.visible,confirmLoading:e.confirmLoading,maskClosable:!1},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[r("a-spin",{attrs:{spinning:e.confirmLoading}},[r("a-form",{attrs:{form:e.form}},[r("a-form-item",{attrs:{label:"商城名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["store_name",{rules:[{required:!0,min:3,message:"请输入至少3个字符"}]}],expression:"['store_name', {rules: [{required: true, min: 3, message: '请输入至少3个字符'}]}]"}]})],1),r("a-form-item",{attrs:{label:"商家用户名",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"商家后台登录用户名"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["user_name",{rules:[{required:!0,min:4,message:"请输入至少4个字符"}]}],expression:"['user_name', {rules: [{required: true, min: 4, message: '请输入至少4个字符'}]}]"}]})],1),r("a-form-item",{attrs:{label:"用户密码",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"商家后台登录密码"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,min:6,message:"请输入至少6个字符"}]}],expression:"['password', {rules: [\n            {required: true, min: 6, message: '请输入至少6个字符'}\n          ]}]"}],attrs:{type:"password"}})],1),r("a-form-item",{attrs:{label:"确认密码",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password_confirm",{rules:[{required:!0,message:"请输入确认密码"},{validator:e.compareToFirstPassword}]}],expression:"['password_confirm', {rules: [\n            {required: true, message: '请输入确认密码'},\n            {validator: compareToFirstPassword}\n          ]}]"}],attrs:{type:"password"}})],1),r("a-form-item",{attrs:{label:"备注信息",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"仅超管后台可见"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark"],expression:"['remark']"}]})],1),r("a-form-item",{attrs:{label:"排序",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"数字越小越靠前"}},[r("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:100,rules:[{required:!0,message:"请输入至少1个数字"}]}],expression:"['sort', {initialValue: 100, rules: [{required: true, message: '请输入至少1个数字'}]}]"}],attrs:{min:0}})],1)],1)],1)],1)},l=[],u=(t("d3b7"),{data:function(){return{labelCol:{span:7},wrapperCol:{span:13},visible:!1,confirmLoading:!1,form:this.$form.createForm(this)}},methods:{show:function(){this.visible=!0,this.form.resetFields()},handleSubmit:function(){var e=this,r=this.form.validateFields;r((function(r,t){!r&&e.onFormSubmit(t)}))},handleCancel:function(){this.visible=!1,this.form.resetFields()},compareToFirstPassword:function(e,r,t){var a=this.form;return!r||r===a.getFieldValue("password")||new Error("您输入的确认密码不一致")},onFormSubmit:function(e){var r=this;this.confirmLoading=!0,Object(n["a"])({form:e}).then((function(t){r.$message.success(t.message,1.2),r.handleCancel(),r.$emit("handleSubmit",e)})).finally((function(e){return r.confirmLoading=!1}))}}}),c=u,d=t("2877"),m=Object(d["a"])(c,i,l,!1,null,null,null),p=m.exports,f=function(){var e=this,r=e._self._c;return r("a-modal",{attrs:{title:"修改商家账户",width:720,visible:e.visible,confirmLoading:e.confirmLoading,maskClosable:!1},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[r("a-spin",{attrs:{spinning:e.confirmLoading}},[r("a-form",{attrs:{form:e.form}},[r("a-form-item",{attrs:{label:"商城名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[r("span",[e._v(e._s(e.record.store_name))])]),r("a-form-item",{attrs:{label:"商家用户名",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"商家后台登录用户名"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["user_name",{rules:[{required:!0,min:4,message:"请输入至少4个字符"}]}],expression:"['user_name', { rules: [{ required: true, min: 4, message: '请输入至少4个字符' }] }]"}]})],1),r("a-form-item",{attrs:{label:"用户密码",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"商家后台登录密码"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{min:6,message:"请输入至少6个字符"}]}],expression:"['password', { rules: [{ min: 6, message: '请输入至少6个字符' }] }]"}],attrs:{type:"password"}})],1),r("a-form-item",{attrs:{label:"确认密码",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password_confirm",{rules:[{message:"请输入确认密码"},{validator:e.compareToFirstPassword}]}],expression:"['password_confirm', { rules: [\n            { message: '请输入确认密码' },\n            { validator: compareToFirstPassword }\n          ] }]"}],attrs:{type:"password"}})],1),r("a-form-item",{attrs:{label:"备注信息",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"仅超管后台可见"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark"],expression:"['remark']"}]})],1),r("a-form-item",{attrs:{label:"排序",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"数字越小越靠前"}},[r("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:100,rules:[{required:!0,message:"请输入至少1个数字"}]}],expression:"['sort', { initialValue: 100, rules: [{ required: true, message: '请输入至少1个数字' }] }]"}],attrs:{min:0}})],1)],1)],1)],1)},b=[],h=(t("4e82"),{data:function(){return{labelCol:{span:7},wrapperCol:{span:13},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),record:{}}},methods:{show:function(e){this.record=e,this.visible=!0,this.setFieldsValue()},setFieldsValue:function(){var e=this;this.$nextTick((function(){return e.form.setFieldsValue({remark:e.record["remark"],sort:e.record["sort"],user_name:e.record["superUser"]["user_name"]})}))},handleSubmit:function(){var e=this,r=this.form.validateFields;r((function(r,t){!r&&e.onFormSubmit(t)}))},handleCancel:function(){this.visible=!1,this.form.resetFields()},compareToFirstPassword:function(e,r,t){var a=this.form;return!r||r===a.getFieldValue("password")||new Error("您输入的确认密码不一致")},onFormSubmit:function(e){var r=this;this.confirmLoading=!0,n["b"]({storeId:this.record["store_id"],form:e}).then((function(t){r.$message.success(t.message,1.2),r.handleCancel(),r.$emit("handleSubmit",e)})).finally((function(e){return r.confirmLoading=!1}))}}}),w=h,v=Object(d["a"])(w,f,b,!1,null,null,null),C=v.exports,_=(t("ca00"),{components:{ContentHeader:s["a"],STable:s["d"],CreateForm:p,AccountForm:C},data:function(){var e=this;return{queryParam:{},columns:[{title:"商城ID",dataIndex:"store_id",width:"120px"},{title:"商城名称",dataIndex:"store_name",width:"200px"},{title:"账户名",scopedSlots:{customRender:"user_name"},width:"180px"},{title:"备注信息",dataIndex:"remark",scopedSlots:{customRender:"remark"}},{title:"排序",dataIndex:"sort"},{title:"添加时间",dataIndex:"create_time"},{title:"操作",dataIndex:"action",width:"200px",scopedSlots:{customRender:"action"}}],loadData:function(r){return n["c"](Object.assign(r,e.queryParam)).then((function(e){return e.data.list}))}}},created:function(){},methods:{handleInto:function(e){var r=window.serverConfig.STORE_URL,t="".concat(r,"/#/passport/login");window.open(t,"_blank")},handleDelete:function(e){var r=this;r.$confirm({title:"您确定要删除该商城吗?",content:"确认后将移入回收站",onOk:function(){return r.onSubmitDelete(e)}})},onSubmitDelete:function(e){var r=this;return n["e"]({storeId:e["store_id"]}).then((function(e){r.$message.success(e.message),r.handleRefresh()}))},handleAccount:function(e){this.$refs.AccountForm.show(e)},handleRefresh:function(){this.$refs.table.refresh()}}}),g=_,x=Object(d["a"])(g,a,o,!1,null,null,null);r["default"]=x.exports},bb70:function(e,r,t){"use strict";t.r(r);var a=function(){var e=this,r=e._self._c;return r("a-card",{attrs:{bordered:!1}},[r("content-header",{attrs:{title:"回收站"}}),r("s-table",{ref:"table",attrs:{size:"default",rowKey:"store_id",columns:e.columns,data:e.loadData,showPagination:"auto",pageSize:15},scopedSlots:e._u([{key:"action",fn:function(t,a){return r("span",{staticClass:"actions"},[r("a",{on:{click:function(r){return e.handleReturn(a)}}},[e._v("还原")])])}}])})],1)},o=[],n=t("73f5"),s=t("2af9"),i={name:"TableList",components:{ContentHeader:s["a"],STable:s["d"]},data:function(){var e=this;return{queryParam:{},columns:[{title:"商城ID",dataIndex:"store_id",scopedSlots:{customRender:"store_id"}},{title:"商城名称",dataIndex:"store_name",scopedSlots:{customRender:"store_name"}},{title:"添加时间",dataIndex:"create_time",scopedSlots:{customRender:"create_time"}},{title:"操作",dataIndex:"action",width:"150px",scopedSlots:{customRender:"action"}}],loadData:function(r){return Object(n["f"])(Object.assign(r,e.queryParam)).then((function(e){return e.data.list}))}}},created:function(){},methods:{handleReturn:function(e){var r=this;r.$confirm({title:"您确定要还原该商城吗?",onOk:function(){return r.onSubmitReturn(e)}})},onSubmitReturn:function(e){var r=this;return Object(n["d"])({storeId:e["store_id"]}).then((function(e){r.$message.success(e.message),r.handleRefresh()}))},handleRefresh:function(){this.$refs.table.refresh()}}},l=i,u=t("2877"),c=Object(u["a"])(l,a,o,!1,null,null,null);r["default"]=c.exports}}]);